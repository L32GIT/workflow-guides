## Введение
При использовании механизма подписи коммитов и связки **git** и **gpg**, необходимо знать и учитывать определенную особенность. На локальном компьютере может быть установлено несколько экземпляров **gpg**, как осознанно, так и из-за ошибок, допущенных в ходе следования различным обучающим статьям в интернете.  
В таких случаях могут возникать проблемы и путаницы с расположением хранилища ключей и подписью.
## gpg содержится внутри git
Если на локальной машине установлен **git**, важно понимать, что он уже содержит в себе установку **gpg**. Этот экземпляр по версии обновляется только вместе с обновлением всего **git**, но в целом, абсолютно работоспособен, может хранить и создавать ключи подписи, а также определяется из **Git Bash** с помощью команды  
```where.exe gpg```  
## Как определить установленные экземпляры gpg
Допустим, вы как и я боретесь с работоспособностью интерактивной подписи в **EGit**, или по каким-либо иным причинам хотите иметь актуальную версию **gpg**, которую можно оперативно обновлять отдельно от **git**. Установить ее можно с помощью инструкции. В этом случае, при выполнении команды  
```where.exe gpg```  
в терминале **Git Bash** вы увидите следующую картину:  
![Скриншот](../images/docs/GPG_MULTIPLE_INSTANCES/gpg_locations_gitbash.png?raw=true)  
Наблюдаем несколько экземпляров установок. В целом, это само по себе не является проблемой, и не нужно торопиться искать способ удалить **gpg** из папки **git**, это может привести к неработоспособности самого **git**. Однако, следует знать одну важную особенность: при вызове команды  
```gpg --version```  
а также при любых других манипуляциях с **gpg** из терминала **Git Bash** вы будете обращаться к экземпляру внутри **git**, и я не нашел способа изменить это поведение.  

Поэтому в этой ситуации для работы с отдельно установленым экземпляром **gpg** (актуальной версии) требуется использовать либо стандартную командную строку, либо **PowerShell**.  
Под работой с **gpg** имеется в виду создание и чтение ключей подписи, а также любые иные вызовы команд, начинающихся со слова ```gpg <...>```.
При вызове команды  
```where.exe gpg```  
в этих терминалах, наблюдаем иную картину:  
![Скриншот](../images/docs/GPG_MULTIPLE_INSTANCES/gpg_locations_cp.png?raw=true)  
а также при вызове команды  
```gpg --version```  
увидим более актуальную версию продукта.
## Хранилища ключей
Каждый из установленных экземпляров **gpg** располагает свое хранилище в отдельном месте. Определить этот путь можно с помощью команды  
```gpg --version```  
он будет указан в строке Home.
Напомню, что с помощью команды  
```gpg --list-secret-keys --keyid-format LONG```  
можно отобразить список ключей хранилища. Если при вызове этой команды программа дает понять, что хранилище пустое, а вы уверены, что на локальной машине должны находиться ключи подписи, скорее всего вы используете не тот терминал (не тот экземпляр **gpg**).
## Настройка git
Обязательным условием является настройка конфигурациии **git** таким образом, чтобы он при подписи коммитов использовал необходимый вам экземпляр **gpg**. Сделать это рекомендуется, даже если в данный момент у вас всего один экземпляр.
Определяем путь к нужному экземпляру с помощью команды  
```where.exe gpg```  
а затем вызываем команду  
```git config --global gpg.program "<путь к exe>"```  
![Скриншот](../images/docs/GPG_MULTIPLE_INSTANCES/git_configuration.png?raw=true)  

Теперь, при работе с **git** из любого терминала, он будет корректно подписывать коммиты ожидаемыми вами ключами.
